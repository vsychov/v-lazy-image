var b=Object.defineProperty,h=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var a=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var l=(e,r,t)=>r in e?b(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,u=(e,r)=>{for(var t in r||(r={}))I.call(r,t)&&l(e,t,r[t]);if(a)for(var t of a(r))O.call(r,t)&&l(e,t,r[t]);return e},f=(e,r)=>h(e,y(r));(function(e,r){typeof exports=="object"&&typeof module!="undefined"?module.exports=r(require("vue")):typeof define=="function"&&define.amd?define(["vue"],r):(e=typeof globalThis!="undefined"?globalThis:e||self,e.VLazyImage=r(e.Vue))})(this,function(e){"use strict";var r={props:{src:{type:String,required:!0},srcPlaceholder:{type:String,default:"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs="},srcset:{type:String},intersectionOptions:{type:Object,default:()=>({})},usePicture:{type:Boolean,default:!1}},inheritAttrs:!1,setup(t,{attrs:c,slots:A,emit:o}){const n=e.ref(null),s=e.reactive({observer:null,intersected:!1,loaded:!1}),g=e.computed(()=>s.intersected&&t.src?t.src:t.srcPlaceholder),v=e.computed(()=>s.intersected&&t.srcset?t.srcset:!1),d=()=>{n.value&&n.value.getAttribute("src")!==t.srcPlaceholder&&(s.loaded=!0,o("load"))},m=()=>o("error",n.value);return e.onMounted(()=>{"IntersectionObserver"in window&&(s.observer=new IntersectionObserver(i=>{i[0].isIntersecting&&(s.intersected=!0,s.observer.disconnect(),o("intersect"))},t.intersectionOptions),s.observer.observe(n.value))}),e.onBeforeUnmount(()=>{"IntersectionObserver"in window&&s.observer&&s.observer.disconnect()}),()=>{const i=e.h("img",f(u({ref:n,src:g.value,srcset:v.value||null},c),{class:[c.class,"v-lazy-image",{"v-lazy-image-loaded":s.loaded}],onLoad:d,onError:m}));return t.usePicture?e.h("picture",{ref:n,onLoad:d},s.intersected?[A.default,i]:[i]):i}}};return r});
